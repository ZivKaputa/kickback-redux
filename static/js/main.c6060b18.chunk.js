(this["webpackJsonpkickback-frontend-redux"]=this["webpackJsonpkickback-frontend-redux"]||[]).push([[0],{105:function(e,t,n){e.exports=n(223)},110:function(e,t,n){},113:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},202:function(e,t){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(14),i=n.n(s),o=(n(110),n(111),n(112),n(3)),c=n(4),l=n(6),u=n(5),p=n(7),m=(n(113),n(10)),d="QUEUE_REQUEST_ITEMS";var f="QUEUE_RECEIVE_ITEMS";function h(e,t,n){return{type:f,items:n,requestedAt:t,receivedAt:Date.now()}}var b="QUEUE_UPDATE_SCROLL_POSITION";function v(e){return{type:b,scrollPosition:e}}function k(){return function(e,t){var n=t().session.id,a=Date.now();return e(function(e,t){return{type:d,sessionId:e,requestedAt:t}}(n,a)),n&&""!==n?fetch("https://frabric.herokuapp.com/get_queue/?session_id=".concat(n)).then((function(e){return e.json()}),(function(e){return console.log("An error occurred.",e)})).then((function(t){e(h(0,a,t)),e(v(0))})):(e(h(0,a,[])),void e(v(0)))}}var E="QUEUE_DELETE_ITEM_LOCALLY";function g(e){return function(t,n){var a=n().queue.data.items[e],r="https://frabric.herokuapp.com/delete_song/?song_id=".concat(a.song_id);t(function(e){return{type:E,deleteItemId:e}}(e)),fetch(r).then((function(e){return console.log("An error occurred.",e)})).then((function(e){t(k())}))}}var y="QUEUE_REORDER_ITEMS_LOCALLY";function O(e,t){return function(n,a){var r=Array.from(a().queue.data.items),s=r[e];r.splice(e,1);var i=t<r.length?r[t]:null,o=i?i.song_id:null,c=o?"&after_song_id="+o:"",l="&session_id="+a().session.id,u="https://frabric.herokuapp.com/move_song?move_song_id="+s.song_id+c+l;n(function(e,t){return{type:y,fromId:e,toId:t}}(e,t)),fetch(u).then((function(e){return console.log("An error occurred.",e)})).then((function(e){n(k())}))}}var w=n(15),N=n(31),j=n(18),_=(n(62),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(N.b,{draggableId:this.props.track.song_id.toString(),index:this.props.index},(function(t,n){var a=n.isDragging?"kb-queue-item-container-dragging":"";return r.a.createElement("div",Object.assign({},t.draggableProps,{ref:t.innerRef,className:"kb-queue-item"}),r.a.createElement("div",{className:"kb-queue-item-container "+a},r.a.createElement("div",{className:"kb-queue-item-image-container"},r.a.createElement("img",{className:"kb-queue-item-image",src:e.props.track.album_image||"http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png"})),r.a.createElement("div",{className:"kb-queue-item-info-container"},r.a.createElement("div",{className:"kb-queue-item-info-pad"}),r.a.createElement("div",{className:"kb-queue-item-name"},e.props.track.name),r.a.createElement("div",{className:"kb-queue-item-details"},e.props.track.artists.join(", ").substring(0,50)," \u2022 ",e.props.track.album.substring(0,50)),r.a.createElement("div",{className:"kb-queue-item-info-pad"})),e.props.isAdmin?r.a.createElement("div",Object.assign({},t.dragHandleProps,{className:"kb-queue-item-drag-handle"}),r.a.createElement(j.d,{icon:"grip-lines"})):null,e.props.isAdmin?r.a.createElement("div",{className:"kb-queue-item-delete",onClick:function(){return e.props.onDelete(e.props.index)}},r.a.createElement(j.d,{icon:"minus-circle"})):null))}))}}]),t}(a.Component)),S=(n(159),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"kb-queue-item kb-queue-now-playing"},r.a.createElement("div",{className:"kb-queue-item-container"},r.a.createElement("div",{className:"kb-queue-item-image-container"},r.a.createElement("img",{className:"kb-queue-item-image",src:this.props.track.album_image||"http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png"})),r.a.createElement("div",{className:"kb-queue-item-info-container"},r.a.createElement("div",{className:"kb-queue-item-info-pad"}),r.a.createElement("div",{className:"kb-queue-item-name"},this.props.track.name),r.a.createElement("div",{className:"kb-queue-item-details"},this.props.track.artists.join(", ").substring(0,50)," \u2022 ",this.props.track.album.substring(0,50)),r.a.createElement("div",{className:"kb-queue-item-info-pad"})),r.a.createElement("div",{className:"kb-queue-now-playing-label"},"Now Playing")))}}]),t}(a.Component)),A=(n(160),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleDragEnd=n.handleDragEnd.bind(Object(w.a)(n)),n.rootRef=r.a.createRef(),n.handleScroll=n.handleScroll.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.rootRef.current&&this.props.scrollPosition&&(this.rootRef.current.scrollTop=this.props.scrollPosition)}},{key:"handleScroll",value:function(){this.props.onScroll(this.rootRef.current.scrollTop)}},{key:"handleDragEnd",value:function(e){var t=e.destination,n=e.source;e.draggableId;t&&(t.droppableId===n.droppableId&&t.index===n.index||this.props.onReorder(n.index,t.index))}},{key:"render",value:function(){var e=this;if(0==this.props.tracks.length)return r.a.createElement("div",{className:"kb-queue-list"},r.a.createElement("div",{className:"kb-queue-empty"},"No tracks in queue"));var t=this.props.tracks.length>0?r.a.createElement(S,{track:this.props.tracks[0],key:this.props.tracks[0].song_id}):r.a.createElement("div",null),n=this.props.tracks.slice(1).map((function(t,n){return r.a.createElement(_,{isAdmin:e.props.isAdmin,track:t,key:t.song_id,index:n+1,onDelete:e.props.onDelete})}));return r.a.createElement("div",{onScroll:this.handleScroll,ref:this.rootRef,className:"kb-queue-list"},t,r.a.createElement(N.a,{onDragEnd:this.handleDragEnd},r.a.createElement(N.c,{droppableId:"kb-queue-droppable"},(function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),n,e.placeholder)}))))}}]),t}(a.Component)),I=Object(m.b)((function(e){return{tracks:e.queue.data.items||[],scrollPosition:e.queue.scrollPosition,isAdmin:e.user.session.id&&e.user.session.id===e.session.id}}),(function(e){return{onDelete:function(t){e(g(t))},onReorder:function(t,n){e(O(t,n))},onScroll:function(t){e(v(t))}}}))(A),C=(n(161),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.item?r.a.createElement("div",{className:"kb-now-playing"},r.a.createElement("div",{className:"flex-padding"}),r.a.createElement("div",{className:"kb-now-playing-panel"},r.a.createElement("div",{className:"kb-now-playing-image-container"},r.a.createElement("img",{className:"kb-now-playing-image",src:this.props.item.album_image})),r.a.createElement("div",{className:"kb-now-playing-info-container"},r.a.createElement("div",{className:"kb-now-playing-title"},this.props.item.name,r.a.createElement("br",null)),r.a.createElement("div",{className:"kb-now-playing-artist-album-info"},this.props.item.artists.join(", ").substring(0,50)," \u2022 ",this.props.item.album.substring(0,50))),this.props.isAdmin?r.a.createElement("div",{className:"kb-now-playing-control-container"},r.a.createElement("div",{className:"flex-padding"}),r.a.createElement("div",{className:"kb-now-playing-button"},this.props.isPlaying?r.a.createElement("span",{onClick:this.props.pause},r.a.createElement(j.d,{icon:"pause"})):r.a.createElement("span",{onClick:this.props.play},r.a.createElement(j.d,{icon:"play"}))),r.a.createElement("div",{className:"kb-now-playing-button"},r.a.createElement("span",{onClick:this.props.skipSong},r.a.createElement(j.d,{icon:"step-forward"}))),r.a.createElement("div",{className:"flex-padding"})):null),r.a.createElement("div",{className:"flex-padding"})):r.a.createElement("div",{className:"kb-now-playing"},r.a.createElement("div",{className:"kb-now-playing-empty"},"No current song"))}}]),t}(a.Component)),P="UPDATE_IS_PLAYING";function T(e){return{type:P,isPlaying:e}}function R(){return function(e,t){return fetch("https://frabric.herokuapp.com/play_next_song/?session_id=".concat(t().session.id)).then((function(t){return e(k()),t}))}}var D=Object(m.b)((function(e){var t=null;return e.queue.data.items&&e.queue.data.items.length>0&&(t=e.queue.data.items[0]),{item:t,isAdmin:e.user.session.id&&e.user.session.id===e.session.id,isPlaying:e.spotify.isPlaying}}),(function(e){return{play:function(){e(T(!0))},pause:function(){e(T(!1))},skipSong:function(){e(R())}}}))(C),q="QUEUE_ADD_ITEM_LOCALLY";var L="SEARCH_UPDATE_SCROLL_POSITION";function U(e){return{type:L,scrollPosition:e}}n(162);var x=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"kb-search-result",onClick:function(){return e.props.onClick(e.props.track)}},r.a.createElement("div",{className:"kb-search-result-image-container"},r.a.createElement("img",{className:"kb-search-result-image",src:this.props.track.album_image||"http://cdn.last.fm/flatness/responsive/2/noimage/default_album_300_g4.png"})),r.a.createElement("div",{className:"kb-search-result-info-container"},r.a.createElement("div",{className:"kb-search-result-info-pad"}),r.a.createElement("div",{className:"kb-search-result-name"},this.props.track.name),r.a.createElement("div",{className:"kb-search-result-details"},this.props.track.artists.join(", ")," \u2022 ",this.props.track.album),r.a.createElement("div",{className:"kb-search-result-info-pad"})))}}]),t}(a.Component),V=(n(163),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).rootRef=r.a.createRef(),n.handleScroll=n.handleScroll.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.rootRef.current&&this.props.scrollPosition&&(this.rootRef.current.scrollTop=this.props.scrollPosition)}},{key:"handleScroll",value:function(){this.props.onScroll(this.rootRef.current.scrollTop)}},{key:"render",value:function(){var e=this;if(!this.props.inSession)return r.a.createElement("div",{id:"kb-search-results",className:"kb-empty-search-result"},"Join a session to add songs");if(!this.props.tracks||0==this.props.tracks.length)return r.a.createElement("div",{id:"kb-search-results",className:"kb-empty-search-result"},"No results");var t=this.props.tracks.map((function(t,n){return r.a.createElement(x,{key:n,track:t,onClick:e.props.onClick})}));return r.a.createElement("div",{onScroll:this.handleScroll,ref:this.rootRef,id:"kb-search-results",className:"list-group kb-search-result-list"},t)}}]),t}(a.Component)),M=n(45),F=Object(m.b)((function(e){return{tracks:e.search.results.items||[],scrollPosition:e.search.scrollPosition,inSession:null!==e.session.id}}),(function(e){return{onClick:function(t){var n;Object(M.b)("You added '"+t.name+"' to the queue."),e((n=t.uri,function(e,t){var a=t().user.id?t().user.id:"Guest",r="https://frabric.herokuapp.com/add_song/?session_id=".concat(t().session.id,"&uri=").concat(n,"&username=").concat(a);fetch(r).then((function(e){return console.log("An error occurred.",e)})).then((function(t){e(k())}))}))},onScroll:function(t){e(U(t))}}}))(V),G=(n(168),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="primary"===this.props.type?"kb-nav-bar-primary":"kb-nav-bar-secondary";return r.a.createElement("div",{className:"kb-nav-bar "+e},this.props.children)}}]),t}(a.Component));G.defaultProps={type:"primary"};var J=G,z=(n(169),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.active?"kb-nav-bar-button-active":"kb-nav-bar-button-inactive";return r.a.createElement("div",{className:"kb-nav-bar-button"},r.a.createElement(j.d,{className:e,onClick:this.props.onClick,icon:this.props.icon}))}}]),t}(a.Component)),Q=(n(170),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=null;return this.props.width&&(e={flex:"none",width:this.props.width}),r.a.createElement("div",{className:"kb-nav-bar-spacer",style:e})}}]),t}(a.Component)),W="TAB_UPDATE_CURRENT";var Y="search",H="queue",B="now_playing",K=H;var X="SEARCH_REQUEST_RESULTS";var $="SEARCH_RECEIVE_RESULTS";function Z(e,t,n){return{type:$,items:n,requestedAt:t,receivedAt:Date.now()}}function ee(e){return function(t){var n=Date.now();return t(function(e,t){return{type:X,query:e,requestedAt:t}}(e,n)),""===e?(t(Z(0,n,[])),void t(U(0))):fetch("https://frabric.herokuapp.com/search/?q=".concat(e)).then((function(e){return e.json()}),(function(e){return console.log("An error occurred.",e)})).then((function(e){t(Z(0,n,e)),t(U(0))}))}}var te="SEARCH_UPDATE_QUERY";var ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).lastChangedAt=Date.now(),n.handleChange=n.handleChange.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=this;this.props.onChange(e);var n=Date.now();this.lastChangedAt=n,setTimeout((function(){n===t.lastChangedAt&&t.props.onPatientChange(e)}),this.props.waitTime)}},{key:"render",value:function(){var e=this;return r.a.createElement("input",{type:"text",placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.handleChange(t.target.value)},className:this.props.className})}}]),t}(a.Component);ne.defaultProps={placeholder:"Search...",value:void 0,onPatientChange:function(){},onChange:function(){},waitTime:0,className:""};var ae=ne,re=(n(171),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ae,{placeholder:this.props.placeholder,value:this.props.value,waitTime:200,onPatientChange:this.props.onPatientChange,onChange:this.props.onChange,className:"kb-search-bar "+this.props.className})}}]),t}(a.Component));re.defaultProps={placeholder:"Search...",value:void 0,onPatientChange:function(){},onChange:function(){},className:""};var se=re,ie=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(se,{onPatientChange:this.props.fetchResults,onChange:this.props.updateQuery,value:this.props.query}))}}]),t}(a.Component),oe=Object(m.b)((function(e){return{items:e.search.results.items,query:e.search.query}}),(function(e){return{updateQuery:function(t){e(function(e){return{type:te,query:e}}(t))},fetchResults:function(t){e(ee(t))},addItem:function(t){e(O(1,2))}}}))(ie),ce=(n(172),{search:"",queue:"Queue",now_playing:"Now Playing"}),le=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.currentTab===Y?r.a.createElement(oe,null):null,n=ce[this.props.currentTab];return r.a.createElement(J,{type:"secondary"},r.a.createElement(z,{active:this.props.isMenuOpen,icon:"bars",onClick:function(){e.props.toggleMenu()}}),r.a.createElement(Q,{width:"4px"}),n,t,r.a.createElement(Q,null),r.a.createElement(z,{active:this.props.currentTab===Y,icon:"search",onClick:function(){e.props.updateTab(Y)}}),r.a.createElement(z,{active:this.props.currentTab===H,icon:"list-alt",onClick:function(){e.props.updateTab(H)}}),r.a.createElement(z,{active:this.props.currentTab===B,icon:"volume-up",onClick:function(){e.props.updateTab(B)}}),r.a.createElement(Q,{width:"4px"}),r.a.createElement(z,{active:this.props.isChatOpen,icon:"comments",onClick:function(){e.props.toggleChat()}}))}}]),t}(a.Component),ue="MENU_TOGGLE";var pe="CHAT_TOGGLE";var me=Object(m.b)((function(e){return{currentTab:e.tab.current,isMenuOpen:e.menu.isOpen,isChatOpen:e.chat.isOpen}}),(function(e){return{updateTab:function(t){e({type:W,currentTab:t})},toggleMenu:function(t){e({type:ue})},toggleChat:function(t){e({type:pe})}}}))(le),de="MENU_VIEW_UPDATE_CURRENT";function fe(e){return{type:de,currentView:e}}var he={PRIMARY:"primary",LOGIN:"login",SIGN_UP:"sign_up",JOIN:"join",CREATE:"create",ADD_FOLLOWER:"add_follower"},be=he.PRIMARY;n(74);var ve=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.LOGIN)}},"Log In"),r.a.createElement("span",null," \u2022 "),r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.SIGN_UP)}},"Sign Up")),n=r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},this.props.username?r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.JOIN)}},"Join"),r.a.createElement("span",null," \u2022 "),r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.CREATE)}},"Create")):r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.JOIN)}},"Join"),r.a.createElement("span",null," \u2022 "),r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.LOGIN)}},"Log In"),r.a.createElement("span",null," (to Create)"))),a=r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},this.props.username?r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.CREATE)}},"Create")):r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.LOGIN)}},"Log In"),r.a.createElement("span",null," to Create"))),s=r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.ADD_FOLLOWER)}},"Follow a New User")),i=this.props.username?r.a.createElement("div",null,r.a.createElement("div",{className:"kb-menu-important"},r.a.createElement("span",{className:"kb-menu-bolder"},"Username: "),this.props.username),r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},r.a.createElement("a",{className:"kb-menu-link",onClick:this.props.logout},"Log Out"))):t,o=this.props.sessionName?r.a.createElement("div",null,r.a.createElement("div",{className:"kb-menu-important"},r.a.createElement("span",{className:"kb-menu-bolder"},"Name: "),this.props.sessionName),r.a.createElement("div",{className:"kb-menu-important"},r.a.createElement("span",{className:"kb-menu-bolder"},"ID: "),this.props.sessionID),r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},r.a.createElement("a",{className:"kb-menu-link",onClick:this.props.leaveSession},"Leave"),r.a.createElement("span",null," \u2022 "),r.a.createElement("a",{className:"kb-menu-link",onClick:function(){e.props.updateView(he.JOIN)}},"Switch"))):n,c=this.props.mySessionID?r.a.createElement("div",null,r.a.createElement("div",{className:"kb-menu-important"},r.a.createElement("span",{className:"kb-menu-bolder"},"Name: ")," ",this.props.mySessionName),r.a.createElement("div",{className:"kb-menu-important"},r.a.createElement("span",{className:"kb-menu-bolder"},"ID: ")," ",this.props.mySessionID),r.a.createElement("div",{className:"kb-menu-primary-bottom-controls"},this.props.sessionID!==this.props.mySessionID?r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){return e.props.updateSession(e.props.mySessionID,e.props.mySessionName)}},"Rejoin"),r.a.createElement("span",null," \u2022 ")):null,r.a.createElement("a",{className:"kb-menu-link",onClick:this.props.deleteMySession},"End"))):a,l=this.props.following&&this.props.following.length>0?this.props.following.map((function(t){var n=Object.keys(t)[0],a=t[n];return r.a.createElement("div",{className:"kb-following",key:n},r.a.createElement("div",{className:"kb-following-username"},n),a.session_id?r.a.createElement("div",{className:"kb-following-session-header"},"Current Session"):null,a.session_id?r.a.createElement("div",{className:"kb-following-subinfo"},r.a.createElement("span",{className:"kb-following-subinfo-label"},"Name: "),a.session_name):null,a.session_id&&a.now_playing?r.a.createElement("div",{className:"kb-following-subinfo"},r.a.createElement("span",{className:"kb-following-subinfo-label"},"Now Playing: "),a.now_playing.name):null,r.a.createElement("div",{className:"kb-following-controls"},a.session_id?r.a.createElement("span",null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){return e.props.joinSession(a.session_id)}},"Join Session"),r.a.createElement("span",null," \u2022\xa0")):null,r.a.createElement("a",{className:"kb-menu-link",onClick:function(){return e.props.unfollowUser(n)}},"Unfollow")))})):null;return r.a.createElement("div",{className:"kb-menu-primary-view"},r.a.createElement("div",{className:"kb-menu-primary-view-section"},r.a.createElement("div",{className:"kb-menu-primary-view-section-title"}," Account Info "),r.a.createElement("div",{className:"kb-menu-primary-view-section-content"}," ",i," ")),r.a.createElement("div",{className:"kb-menu-primary-view-section"},r.a.createElement("div",{className:"kb-menu-primary-view-section-title"}," My Session "),r.a.createElement("div",{className:"kb-menu-primary-view-section-content"}," ",c," ")),r.a.createElement("div",{className:"kb-menu-primary-view-section"},r.a.createElement("div",{className:"kb-menu-primary-view-section-title"}," Current Session "),r.a.createElement("div",{className:"kb-menu-primary-view-section-content"}," ",o," ")),r.a.createElement("div",{className:"kb-menu-primary-view-section"},r.a.createElement("div",{className:"kb-menu-primary-view-section-title"}," Following "),r.a.createElement("div",{className:"kb-menu-primary-view-section-content"}," ",s," ",l," ")))}}]),t}(a.Component),ke="UPDATE_USER_LOCALLY";var Ee="UPDATE_USER_OWNED_SESSION_LOCALLY";function ge(e,t){return{type:Ee,sessionID:e,sessionName:t}}function ye(e){return e||null}function Oe(){return function(e,t){var n="https://frabric.herokuapp.com/get_owned_session?owner=".concat(t().user.id);fetch(n).then((function(e){return e.json()}),(function(e){return console.log("An error occurred.",e)})).then((function(t){e(ge(ye(t.session_id),ye(t.session_name)))}))}}var we="FOLLOWING_REQUEST_RESULTS";var Ne="FOLLOWING_RECEIVE_RESULTS";function je(e,t){return{type:Ne,items:t,requestedAt:e,receivedAt:Date.now()}}function _e(){return function(e,t){var n=Date.now();return e(function(e){return{type:we,requestedAt:e}}(n)),t().user.id||e(je(n,[])),fetch("https://frabric.herokuapp.com/get_following/?username=".concat(t().user.id)).then((function(e){return e.json()}),(function(e){return console.log("An error occurred.",e)})).then((function(t){e(je(n,t))}))}}var Se,Ae=n(20),Ie=n.n(Ae),Ce=n(100),Pe=function(){return Se};function Te(e){return function(t,n){var a=Pe();n().user.id&&a.emit("leave",n().user.id),e&&a.emit("join",e),Ie.a.setItem("kb-username",e).then((function(){return Ie.a.getItem("kb-username")})).then((function(n){t(function(e){return{type:ke,newUserId:e}}(e)),t((function(e,t){e(Oe()),e(_e())}))}))}}var Re="UPDATE_SESSION_LOCALLY";var De="CHAT_REQUEST_RESULTS";var qe="CHAT_RECEIVE_RESULTS";function Le(e,t){return{type:qe,items:t,requestedAt:e,receivedAt:Date.now()}}function Ue(){return function(e,t){var n=Date.now();return e(function(e){return{type:De,requestedAt:e}}(n)),t().session.id||e(Le(n,[])),fetch("https://frabric.herokuapp.com/retrieve_chat/?session_id=".concat(t().session.id)).then((function(e){return e.json()}),(function(e){return console.log("An error occurred.",e)})).then((function(t){e(Le(n,t))}))}}function xe(e,t){return function(n,a){var r=Pe();a().session.id&&r.emit("leave",a().session.id),e&&r.emit("join",e),Ie.a.setItem("kb-session",{id:e,name:t}).then((function(){return Ie.a.getItem("kb-session")})).then((function(e){n(function(e,t){return{type:Re,newSessionID:e,newSessionName:t}}(e.id,e.name)),n((function(e,t){e(k()),e(Oe()),e(Ue())}))}))}}var Ve="UPDATE_MENU_FORM_FIELD";function Me(e,t){return{type:Ve,field:e,newVal:t}}var Fe=Object(m.b)((function(e){return{username:e.user.id,sessionName:e.session.name,sessionID:e.session.id,mySessionID:e.user.session.id,mySessionName:e.user.session.name,following:e.user.following.items}}),(function(e){return{updateView:function(t){e(fe(t))},logout:function(){e(Te(null))},leaveSession:function(){e(xe(null,null))},joinSession:function(t){e(fe(he.JOIN)),e(Me("sessionID",t))},updateSession:function(t,n){e(xe(t,n))},deleteMySession:function(){e((function(e,t){var n="https://frabric.herokuapp.com/end_session?session_id=".concat(t().user.session.id);fetch(n).then((function(n){n.ok&&(t().session.id===t().user.session.id&&e(xe(null,null)),e(ge(null,null)))}))}))},unfollowUser:function(t){e(function(e){return function(t,n){return fetch("https://frabric.herokuapp.com/unfollow_user/?follower=".concat(n().user.id,"&following=").concat(e)).then((function(e){return console.log("An error occurred.",e)})).then((function(e){t(_e())}))}}(t))}}}))(ve),Ge=(n(205),n(206),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"kb-form-input-bar-container"},r.a.createElement("div",{className:"kb-form-input-bar-header"},this.props.label),r.a.createElement(ae,{placeholder:this.props.placeholder,value:this.props.value,onChange:this.props.onChange,className:"kb-form-input-bar-text"}))}}]),t}(a.Component)),Je=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.formInfo.inputs,n=Object.keys(t).map((function(n){return r.a.createElement(Ge,{label:t[n].label,placeholder:t[n].placeholder,value:t[n].value,onChange:function(t){return e.props.onInputChange(n,t)},key:n})}));return r.a.createElement("div",{className:"kb-menu-form-view"},r.a.createElement("div",{className:"kb-menu-form-header"},this.props.formInfo.title),r.a.createElement("div",{className:"kb-menu-form-view-input-container"},n),r.a.createElement("div",{className:"kb-menu-form-view-error"},this.props.formInfo.error),r.a.createElement("div",{className:"kb-menu-form-view-controls"},r.a.createElement("div",{className:"kb-menu-form-view-submit"},r.a.createElement("a",{className:"kb-menu-link",onClick:this.props.onSubmit},this.props.formInfo.submitLabel)),r.a.createElement("div",{className:"kb-menu-form-view-cancel"},r.a.createElement("a",{className:"kb-menu-link",onClick:this.props.onCancel},"Cancel"))))}}]),t}(a.Component),ze=(n(207),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=null;switch(this.props.currentView){case he.PRIMARY:t=r.a.createElement(Fe,null);break;case he.LOGIN:case he.SIGN_UP:case he.CREATE:case he.ADD_FOLLOWER:case he.JOIN:t=r.a.createElement(Je,{formInfo:this.props.formInfo,onInputChange:this.props.onInputChange,onSubmit:function(){e.props.onSubmit(e.props.formInfo)},onCancel:function(){e.props.updateView(he.PRIMARY)}});break;default:t=r.a.createElement("div",null," Error ")}return r.a.createElement("div",{className:"kb-menu"},r.a.createElement("div",{className:"kb-menu-title"},"Menu"),t)}}]),t}(a.Component)),Qe="UPDATE_MENU_FORM_ERROR";function We(e){return{type:Qe,newError:e}}function Ye(e){return e||null}function He(e){return function(t,n){t(We(""));var a="https://frabric.herokuapp.com/",r=null;switch(e.id){case he.LOGIN:r=a+"validate_user?username=".concat(e.inputs.username.value,"&password=").concat(e.inputs.password.value);break;case he.SIGN_UP:r=a+"create_user?username=".concat(e.inputs.username.value,"&password=").concat(e.inputs.password.value);break;case he.JOIN:r=a+"validate_session?session_id=".concat(e.inputs.sessionID.value,"&session_password=").concat(e.inputs.sessionPassword.value);break;case he.CREATE:r=a+"create_session?session_id=".concat(e.inputs.sessionID.value,"&session_password=").concat(e.inputs.sessionPassword.value)+"&session_name=".concat(e.inputs.sessionName.value,"&owner=").concat(n().user.id);break;case he.ADD_FOLLOWER:return void s((function(){return t((n=e.inputs.username.value,function(e,t){return fetch("https://frabric.herokuapp.com/follow_user/?follower=".concat(t().user.id,"&following=").concat(n)).then((function(t){return e(_e()),t}))}));var n}))}function s(n){n().then((function(e){return function(e,n){n.ok||n.text().then((function(e){return t(We(e))}))}(0,e),e})).then((function(n){!function(e,n){if(n.ok){switch(e.id){case he.LOGIN:case he.SIGN_UP:t(Te(e.inputs.username.value));break;case he.CREATE:case he.JOIN:n.text().then((function(e){n=JSON.parse(e),t(xe(Ye(n.session_id),Ye(n.session_name)))}))}t(fe(he.PRIMARY))}}(e,n)})).catch((function(e){console.log(e)}))}s((function(){return fetch(r)}))}}var Be=Object(m.b)((function(e){return{currentView:e.menu.currentView,formInfo:e.menu.formInfo}}),(function(e){return{updateView:function(t){e(fe(t))},onInputChange:function(t,n){e(Me(t,n))},onSubmit:function(t){e(He(t))}}}))(ze),Ke=(n(208),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.messages.map((function(e,t){return r.a.createElement("div",{key:t,className:"kb-chat-message-box"},r.a.createElement("span",{className:"kb-chat-message-title"},e.username,": "),e.message)}));return r.a.createElement("div",{className:"kb-chat"},r.a.createElement("div",{className:"kb-chat-title"},"Chat"),r.a.createElement("div",{className:"kb-chat-list-container"},r.a.createElement("div",{className:"kb-chat-top-spacer"}),e),r.a.createElement("div",{className:"kb-menu-control-container"},r.a.createElement(ae,{placeholder:"Enter a message...",value:this.props.inputText,onChange:this.props.updateText,className:"kb-menu-chat-text-box"}),r.a.createElement("div",{className:"kb-menu-chat-button",onClick:this.props.sendMessage},r.a.createElement(j.d,{icon:"paper-plane"}))))}}]),t}(a.Component)),Xe="CHAT_UPDATE_INPUT_TEXT";function $e(e){return{type:Xe,newText:e}}var Ze=Object(m.b)((function(e){return{messages:e.chat.data.items||[],inputText:e.chat.inputText}}),(function(e){return{updateText:function(t){e($e(t))},sendMessage:function(){e((function(e,t){var n=t().user.id?t().user.id:"Guest",a=t().session.id,r=t().chat.inputText,s="https://frabric.herokuapp.com/add_to_chat/?session_id=".concat(a,"&username=").concat(n,"&message=").concat(r);fetch(s).then((function(e){return console.log("An error occurred.",e)})).then((function(t){e(Ue()),e($e(""))}))}))}}}))(Ke),et=(n(209),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=void 0;switch(this.props.currentTab){case Y:e=r.a.createElement(F,null);break;case H:e=r.a.createElement(I,null);break;case B:e=r.a.createElement(D,null);break;default:e=r.a.createElement("div",null," Error ")}var t=this.props.isMenuOpen?r.a.createElement(Be,null):null,n=this.props.isChatOpen?r.a.createElement(Ze,null):null;return r.a.createElement("div",{className:"kb-control-panel"},t,r.a.createElement("div",{className:"kb-center-control"},r.a.createElement(me,null),e),n)}}]),t}(a.Component)),tt=Object(m.b)((function(e){return{items:e.search.results.items||[],currentTab:e.tab.current,isMenuOpen:e.menu.isOpen,isChatOpen:e.chat.isOpen}}),(function(e){return{}}))(et),nt="UPDATE_ACCESS_TOKEN_LOCALLY";var at=n(101),rt=n.n(at),st="c7068e47edfd40ce947f93adfc20eb96",it="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(st,"&redirect_uri=").concat(encodeURIComponent("http://localhost:3000"),"&scope=").concat(["user-read-currently-playing","user-read-playback-state","user-modify-playback-state","streaming"].join("%20"),"&response_type=token&show_dialog=true");new rt.a({clientId:st,redirectUri:"http://localhost:3000"});var ot=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleAuthorization=n.handleAuthorization.bind(Object(w.a)(n)),n.playSong=n.playSong.bind(Object(w.a)(n)),n.pauseSong=n.pauseSong.bind(Object(w.a)(n)),n.checkAuthorization=n.checkAuthorization.bind(Object(w.a)(n)),n.initializePlayer=n.initializePlayer.bind(Object(w.a)(n)),n.player=null,n.fresh=!0,n.lastSong=null,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"checkAuthorization",value:function(){this.props.accessToken||this.handleAuthorization()}},{key:"handleAuthorization",value:function(){window.location=it}},{key:"initializePlayer",value:function(){var e=this,t=new window.Spotify.Player({name:"Kickback Player",getOAuthToken:function(t){t(e.props.accessToken)},volume:.5});t.addListener("ready",(function(n){n.device_id;e.player=t})),t.addListener("player_state_changed",(function(t){0===t.position&&t.paused&&e.props.isPlaying&&e.props.currentTrack&&e.lastSong!=e.props.currentTrack.id&&(e.lastSong=e.props.currentTrack.id,e.props.skipSong())})),t.connect().then((function(e){e&&console.log("The Web Playback SDK successfully connected to Spotify!")}))}},{key:"playSong",value:function(e,t){t?function(e){var t=e.spotify_uri,n=e.playerInstance._options,a=n.getOAuthToken,r=n.id;a((function(e){fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(r),{method:"PUT",body:JSON.stringify({uris:[t]}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}))}({playerInstance:this.player,spotify_uri:e}):this.player.resume().then((function(){console.log("Resumed!")}))}},{key:"pauseSong",value:function(){this.player.pause().then((function(){console.log("Paused!")}))}},{key:"shouldComponentUpdate",value:function(e,t){if(!this.player||e.currentTrack&&this.props.playerActive){if(this.player&&this.props.playerActive){var n=!e.currentTrack||!this.props.currentTrack||e.currentTrack.id!=this.props.currentTrack.id;n&&(this.fresh=!0),e.isPlaying&&e.currentTrack&&(n||this.fresh)?(this.playSong(e.currentTrack.uri,!0),this.fresh=!1):e.currentTrack&&e.isPlaying?this.playSong(null,!1):e.currentTrack&&!e.isPlaying&&this.pauseSong()}}else this.pauseSong(),this.props.setPaused();return!0}},{key:"render",value:function(){var e=this;if(this.props.playerActive){window.Spotify&&!this.player?this.initializePlayer():window.Spotify||this.player||(window.onSpotifyWebPlaybackSDKReady=function(){e.initializePlayer()});var t=function(e){var t=window.location.hash.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null}("access_token");if(t)return this.props.updateAccessToken(t),window.history.replaceState(null,null,"/kickback-redux"),null;!this.props.accessToken&&this.props.playerActive&&this.handleAuthorization()}return null}}]),t}(r.a.Component),ct=Object(m.b)((function(e){return{accessToken:e.spotify.accessToken,playerActive:e.user.session.id&&e.user.session.id===e.session.id,currentTrack:e.queue.data.items.length>0?{uri:"spotify:track:"+e.queue.data.items[0].uri,id:e.queue.data.items[0].song_id}:null,isPlaying:e.spotify.isPlaying}}),(function(e){return{updateAccessToken:function(t){e({type:nt,newAccessToken:t})},skipSong:function(){e(R())},setPaused:function(){e(T(!1))}}}))(ot),lt=(n(221),n(222),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ct,null),r.a.createElement(J,{type:"primary"},"Kickback"),r.a.createElement(tt,null),r.a.createElement(M.a,{toastClassName:"kb-toast",position:"bottom-center",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!1,draggable:!0,pauseOnHover:!1}))}}]),t}(a.Component)),ut=Object(m.b)((function(e){return{}}),(function(e){return{}}))(lt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt=n(102),mt=n(103),dt=n(9),ft="";var ht=0;var bt=n(19),vt="SEARCH_INVALIDATE_RESULTS";function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(n,!0).forEach((function(t){Object(bt.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt={isFetching:!1,didInvalidate:!1,lastUpdated:0,lastRequestedAt:0,lastSuccesfullyRequestedAt:0,items:[]};var yt=Object(dt.c)({query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:case X:return t.query;default:return e}},scrollPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return t.scrollPosition;default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Et({},e,{didInvalidate:!0});case $:return t.requestedAt===e.lastRequestedAt?Et({},e,{didInvalidate:!1,isFetching:!1,items:t.items,lastUpdated:t.receivedAt,lastSuccesfullyRequestedAt:t.requestedAt}):e;case X:return Et({},e,{didInvalidate:!1,isFetching:!1,lastRequestedAt:t.requestedAt});default:return e}}}),Ot=n(104),wt="QUEUE_INVALIDATE_ITEMS";function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){Object(bt.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t={isFetching:!1,didInvalidate:!1,lastUpdated:0,lastRequestedAt:0,lastSuccesfullyRequestedAt:0,items:[]};var St=0;var At=Object(dt.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=Array.from(e.items);return n.splice(t.deleteItemId,1),jt({},e,{didInvalidate:!0,items:n});case y:var a=Array.from(e.items),r=a[t.fromId];return a.splice(t.fromId,1),a.splice(t.toId,0,r),jt({},e,{didInvalidate:!0,items:a});case q:return jt({},e,{didInvalidate:!0,items:[].concat(Object(Ot.a)(e.items),[t.item])});case wt:return jt({},e,{didInvalidate:!0});case f:return t.requestedAt===e.lastRequestedAt?jt({},e,{didInvalidate:!1,isFetching:!1,items:t.items,lastUpdated:t.receivedAt,lastSuccesfullyRequestedAt:t.requestedAt}):e;case d:return jt({},e,{didInvalidate:!1,isFetching:!1,lastRequestedAt:t.requestedAt});default:return e}},scrollPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.scrollPosition;default:return e}}}),It=null;var Ct=null;var Pt=Object(dt.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return t.newSessionID;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return t.newSessionName;default:return e}}}),Tt=null;var Rt={id:null,name:null};var Dt="FOLLOWING_INVALIDATE_RESULTS";function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(n,!0).forEach((function(t){Object(bt.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut={isFetching:!1,didInvalidate:!1,lastUpdated:0,lastRequestedAt:0,lastSuccesfullyRequestedAt:0,items:[]};var xt=Object(dt.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return t.newUserId;default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return{id:t.sessionID,name:t.sessionName};default:return e}},following:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return Lt({},e,{didInvalidate:!0});case Ne:return t.requestedAt===e.lastRequestedAt?Lt({},e,{didInvalidate:!1,isFetching:!1,items:t.items,lastUpdated:t.receivedAt,lastSuccesfullyRequestedAt:t.requestedAt}):e;case we:return Lt({},e,{didInvalidate:!1,isFetching:!1,lastRequestedAt:t.requestedAt});default:return e}}}),Vt=Object(dt.c)({current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return t.currentTab;default:return e}}}),Mt=!0;function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach((function(t){Object(bt.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt={},zt="e.g. Bobby Shmurda",Qt="e.g. FreeBobby2019",Wt="e.g. 12345",Yt="e.g. Bobby's Fire Beats";var Ht=Object(dt.c)({isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;switch((arguments.length>1?arguments[1]:void 0).type){case ue:return!e;default:return e}},currentView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return t.currentView;default:return e}},formInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:switch(t.currentView){case he.LOGIN:return{id:he.LOGIN,inputs:{username:{label:"Username",placeholder:zt,value:""},password:{label:"Password",placeholder:Qt,value:""}},title:"Log In to Kickback",submitLabel:"Log In",error:""};case he.SIGN_UP:return{id:he.SIGN_UP,inputs:{username:{label:"Username",placeholder:zt,value:""},password:{label:"Password",placeholder:Qt,value:""}},title:"Sign Up for Kickback",submitLabel:"Sign Up",error:""};case he.JOIN:return{id:he.JOIN,inputs:{sessionID:{label:"Session ID",placeholder:Wt,value:""},sessionPassword:{label:"Session Password",placeholder:Qt,value:""}},title:"Join a Session",submitLabel:"Join",error:""};case he.CREATE:return{id:he.CREATE,inputs:{sessionName:{label:"Session Name",placeholder:Yt,value:""},sessionID:{label:"Session ID (Optional)",placeholder:Wt,value:""},sessionPassword:{label:"Session Password (Optional)",placeholder:Qt,value:""}},title:"Create a Session",submitLabel:"Create and Join",error:""};case he.ADD_FOLLOWER:return{id:he.ADD_FOLLOWER,inputs:{username:{label:"Username",placeholder:zt,value:""}},title:"Follow a User",submitLabel:"Follow",error:""};default:return e}case Ve:switch(e.id){case he.JOIN:case he.CREATE:if("sessionID"===t.field&&t.newVal.length>4)return e;default:return Gt({},e,{inputs:Gt({},e.inputs,Object(bt.a)({},t.field,Gt({},e.inputs[t.field],{value:t.newVal})))})}case Qe:return Gt({},e,{error:t.newError});default:return e}}}),Bt=!1;var Kt="CHAT_INVALIDATE_RESULTS";function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(n,!0).forEach((function(t){Object(bt.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt={isFetching:!1,didInvalidate:!1,lastUpdated:0,lastRequestedAt:0,lastSuccesfullyRequestedAt:0,items:[]};var en="";var tn=Object(dt.c)({isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;switch((arguments.length>1?arguments[1]:void 0).type){case pe:return!e;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt:return $t({},e,{didInvalidate:!0});case qe:return t.requestedAt===e.lastRequestedAt?$t({},e,{didInvalidate:!1,isFetching:!1,items:t.items,lastUpdated:t.receivedAt,lastSuccesfullyRequestedAt:t.requestedAt}):e;case De:return $t({},e,{didInvalidate:!1,isFetching:!1,lastRequestedAt:t.requestedAt});default:return e}},inputText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return t.newText;default:return e}}}),nn=null;var an=!1;var rn=Object(dt.c)({accessToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt:return t.newAccessToken;default:return e}},isPlaying:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.isPlaying;default:return e}}}),sn=Object(dt.c)({search:yt,queue:At,session:Pt,user:xt,tab:Vt,menu:Ht,chat:tn,spotify:rn});(Se=Ce("https://kickback-socket-server.herokuapp.com/")).on("update",(function(e){"queue"===e&&cn.dispatch(k()),"chat"===e&&cn.dispatch(Ue()),"followers"===e&&cn.dispatch(_e())}));var on=Object(mt.createLogger)(),cn=Object(dt.e)(sn,Object(dt.a)(pt.a,on));cn.dispatch((function(e,t){Ie.a.getItem("kb-username").then((function(t){t&&e(Te(t))}))})),cn.dispatch((function(e,t){Ie.a.getItem("kb-session").then((function(t){t&&t.id&&t.name&&e(xe(t.id,t.name))}))})),i.a.render(r.a.createElement(m.a,{store:cn},r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,n){},74:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.c6060b18.chunk.js.map